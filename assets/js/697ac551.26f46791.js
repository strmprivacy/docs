"use strict";(self.webpackChunkend_user_docs=self.webpackChunkend_user_docs||[]).push([[204],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(a),u=r,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||o;return a?n.createElement(m,i(i({ref:t},p),{},{components:a})):n.createElement(m,i({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1728:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const o={title:"Core",hide_table_of_contents:!1},i="STRM Privacy Concepts",s={unversionedId:"concepts/core-concepts",id:"concepts/core-concepts",title:"Core",description:"What problems are we trying to solve?",source:"@site/docs/concepts/core-concepts.md",sourceDirName:"concepts",slug:"/concepts/core-concepts",permalink:"/docs/latest/concepts/core-concepts",draft:!1,tags:[],version:"current",frontMatter:{title:"Core",hide_table_of_contents:!1},sidebar:"docs",previous:{title:"STRM Privacy concepts",permalink:"/docs/latest/concepts/"},next:{title:"Data Subjects and its API",permalink:"/docs/latest/concepts/data-subjects"}},l={},c=[{value:"What problems are we trying to solve?",id:"what-problems-are-we-trying-to-solve",level:2},{value:"Concepts",id:"concepts",level:2},{value:"Events shall be correct",id:"events-shall-be-correct",level:3},{value:"Events shall be privacy safe",id:"events-shall-be-privacy-safe",level:3},{value:"Latency shall be low",id:"latency-shall-be-low",level:3},{value:"Fault tolerance and horizontal scalability",id:"fault-tolerance-and-horizontal-scalability",level:3},{value:"Encryption / Decryption",id:"encryption--decryption",level:3},{value:"Using the encrypted data.",id:"using-the-encrypted-data",level:2},{value:"Using the decrypted data.",id:"using-the-decrypted-data",level:3},{value:"Identify the consent levels you need.",id:"identify-the-consent-levels-you-need",level:3},{value:"Consent level types",id:"consent-level-types",level:3},{value:"Create a decrypted stream",id:"create-a-decrypted-stream",level:3},{value:"Getting the data into STRM Privacy",id:"getting-the-data-into-strm-privacy",level:2},{value:"Getting data out of STRM Privacy",id:"getting-data-out-of-strm-privacy",level:2},{value:"Batch exports",id:"batch-exports",level:3},{value:"Kafka consumers",id:"kafka-consumers",level:3}],p={toc:c};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"strm-privacy-concepts"},"STRM Privacy Concepts"),(0,r.kt)("h2",{id:"what-problems-are-we-trying-to-solve"},"What problems are we trying to solve?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"STRM Privacy handles processing of events that contain personal data\nin a privacy regulations compliant way.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"STRM Privacy improves the quality of event data by separating the\nrules that govern the shape and content of the event data from the\nteams that generate the data. So in essence, the data-scientists and\nanalytics determine the rules, and not the front-end teams where the\ndata originates.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"STRM Privacy moves the decisions around privacy compliance from the\nsoftware developers and data teams to those entities that know about\nprivacy. The rules that govern the personal data aspects of an event\nare handled by so-called event contracts, and ",(0,r.kt)("em",{parentName:"p"},"do not")," require work\nby software developers.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"STRM Privacy takes care of complexities of handling high-volume\nevent data with low latency and high availability.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"STRM Privacy makes sure that there is an audit trail around the\nhandling of personal event data. It provides the tooling to show\nwhat entity is using what personal data for what purpose."))),(0,r.kt)("h2",{id:"concepts"},"Concepts"),(0,r.kt)("p",null,"STRM Privacy is an event processing engine designed around the following\nconcepts."),(0,r.kt)("h3",{id:"events-shall-be-correct"},"Events shall be correct"),(0,r.kt)("p",null,"Data science teams all over are well aware of the many ways that data\nare wrong. It\u2019s generally left up to them to try to work their way out\nof the mess. Stream Machine aims to move the responsibility of\ngenerating ",(0,r.kt)("em",{parentName:"p"},"correct")," data forwards so that those entities that produce\nevent data will receive ",(0,r.kt)("em",{parentName:"p"},"immediate")," feedback in case of discrepancies."),(0,r.kt)("p",null,"Events in STRM Privacy are strictly defined both in shape and content.\nEvents that do not conform will be rejected. For this, STRM Privacy uses\n",(0,r.kt)("a",{parentName:"p",href:"/docs/latest/concepts/schemas-and-contracts"},"Schemas and Contracts")," to which all events\nmust conform."),(0,r.kt)("h3",{id:"events-shall-be-privacy-safe"},"Events shall be privacy safe"),(0,r.kt)("p",null,"The events conform to a certain schema, and this schema defines which\nevent attributes contain ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Personal_data"},"Personally Identifiable Information\n(PII)"),". Events that are\naccepted by STRM Privacy will have these attributes encrypted before\nentering any persistent storage. The encryption key is linked to an\nevent attribute that defines its ",(0,r.kt)("em",{parentName:"p"},"session"),", i.e. the attribute that ties\nthe events together as a sequence belonging to one entity. The\nencryption key is rotated every 24 hours."),(0,r.kt)("p",null,"A limited number of example schemas can be seen ",(0,r.kt)("a",{parentName:"p",href:"https://strmprivacy.io/schemas/"},"in the STRM Privacy Web\nConsole")),(0,r.kt)("h3",{id:"latency-shall-be-low"},"Latency shall be low"),(0,r.kt)("p",null,"Both on ingest, and on further processing, STRM Privacy was designed and\nbuilt to provide low latency. The current implementation uses http/2 for\ningest, with typical 99 percentile latencies well below 10ms ",(0,r.kt)("sup",{parentName:"p",id:"fnref-1"},(0,r.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),"."),(0,r.kt)("p",null,"Internally we use ",(0,r.kt)("a",{parentName:"p",href:"https://kafka.apache.org/"},"Kafka")," for high throughput\nfault tolerant pipelines. We can configure batch sizes at will, but\nhaving your event data in your own Kafka consumer within 1 second is\neasily doable."),(0,r.kt)("h3",{id:"fault-tolerance-and-horizontal-scalability"},"Fault tolerance and horizontal scalability"),(0,r.kt)("p",null,"STRM Privacy was designed from the ground up for horizontal scalability\nand fault tolerance. Single points of failure are currently only if the\nwhole cloud region goes down."),(0,r.kt)("h3",{id:"encryption--decryption"},"Encryption / Decryption"),(0,r.kt)("p",null,"STRM Privacy encrypts the events but with what key? To understand this\nwe have to look at another component of the schema, the ",(0,r.kt)("em",{parentName:"p"},"event sequence\nidentifier")," attribute ",(0,r.kt)("sup",{parentName:"p",id:"fnref-2"},(0,r.kt)("a",{parentName:"sup",href:"#fn-2",className:"footnote-ref"},"2")),". The value in this attribute defines wether or\nnot events belong to the same sequence. This might be website actions of\none person, or maybe a device id of a car sending location data, we\ndon\u2019t care. The first time a new value is seen in the ",(0,r.kt)("em",{parentName:"p"},"key field")," an\nencryption key is generated in STRM Privacy which is linked to the event\nvia its ",(0,r.kt)("inlineCode",{parentName:"p"},"strmMeta/keyLink")," value. The encryption and its associated key\nlink remain in use for 24 hours, and a new pair will then be generated."),(0,r.kt)("h2",{id:"using-the-encrypted-data"},"Using the encrypted data."),(0,r.kt)("p",null,"The primary event stream is called the ",(0,r.kt)("em",{parentName:"p"},"encrypted stream")," and this by\ndesign no longer contains PII data. ",(0,r.kt)("strong",{parentName:"p"},"Everyone")," in your company can use\nit ",(0,r.kt)("sup",{parentName:"p",id:"fnref-3"},(0,r.kt)("a",{parentName:"sup",href:"#fn-3",className:"footnote-ref"},"3")),". In case these data become compromised, you have a business\nissue, but ",(0,r.kt)("strong",{parentName:"p"},"not")," a privacy issue."),(0,r.kt)("p",null,"Even these data are useful. With a typical clickstream, where ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," is\nnot considered personal data, you could identify dead ends on your site,\nor train recommender engines on the encrypted stream, because the\nattributes that identify the sequence even though encrypted, remain ",(0,r.kt)("em",{parentName:"p"},"the\nsame")," for 24 hours. This is plenty long enough to understand typical\ncustomer journeys, without compromising the privacy of your users."),(0,r.kt)("h3",{id:"using-the-decrypted-data"},"Using the decrypted data."),(0,r.kt)("p",null,"If your usecase requires specific permissions, the process is as\nfollows:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"flowchart",src:a(141).Z,width:"750",height:"491"})),(0,r.kt)("h3",{id:"identify-the-consent-levels-you-need"},"Identify the consent levels you need."),(0,r.kt)("p",null,"Ask the ",(0,r.kt)("a",{parentName:"p",href:"https://tinyurl.com/wozhnn5"},"Data Protection Officer")," the\nspecific consent levels your usecase requires. This will return a list\nof values ",(0,r.kt)("sup",{parentName:"p",id:"fnref-4"},(0,r.kt)("a",{parentName:"sup",href:"#fn-4",className:"footnote-ref"},"4"))," that you need."),(0,r.kt)("h3",{id:"consent-level-types"},"Consent level types"),(0,r.kt)("p",null,"STRM Privacy supports two types of consent levels when creating a\ndecrypted output stream: granular and cumulative."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Cumulative: Only the highest consent level is configured on the\noutput stream. All consent levels from zero (included) up to this\nlevel (included) are decrypted in the output stream.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Granular: All the consent levels that are to be decrypted in the\noutput stream are explicitly configured. This way, it\u2019s possible to\nhave "gaps" between the consent levels. For example, can specify\nlevel 1 and 4, which means that all other levels, including 2 and 3\nremain encrypted.'))),(0,r.kt)("p",null,"The resulting set of consent levels effects two things, see:\n",(0,r.kt)("a",{parentName:"p",href:"#create-a-decrypted-stream"},"Create a decrypted stream")),(0,r.kt)("h3",{id:"create-a-decrypted-stream"},"Create a decrypted stream"),(0,r.kt)("p",null,"Here you instruct STRM Privacy to decrypt event data with above consent\nlevels. STRM Privacy will"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"drop all events that don\u2019t at least contain all the consent levels\nyou require.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"decrypt attributes with the consent levels you requested. Attributes\nwith other pii levels will not be decrypted. So you receive exactly\nwhat you have a right to, and nothing more."))),(0,r.kt)("p",null,"You access this stream with a specific set of credentials."),(0,r.kt)("p",null,"This means that data consumers will only receive the data they are\nlegally allowed to receive, provided the company is careful with ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"not\nre-using credentials")),"."),(0,r.kt)("h2",{id:"getting-the-data-into-strm-privacy"},"Getting the data into STRM Privacy"),(0,r.kt)("p",null,"STRM Privacy is currently an engine running on Google Cloud, with http/2\ninput. In order to have data accepted by STRM Privacy you need the\nfollowing:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"a valid account")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"a stream definition, with associated credentials. STRM Privacy\ncurrently uses the Oauth 2.0 client credentials scheme.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"an http/http2 client that sends data in the correct format. We\nprovide ",(0,r.kt)("em",{parentName:"p"},"drivers")," for various languages ",(0,r.kt)("sup",{parentName:"p",id:"fnref-5"},(0,r.kt)("a",{parentName:"sup",href:"#fn-5",className:"footnote-ref"},"5"))," that simplify creating\nthe events and sending the data. For maximum performance, http/2 is\npreferred over http1.1. You can find the drivers on\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strmprivacy"},"github.com/strmprivacy")," You don\u2019t\n",(0,r.kt)("em",{parentName:"p"},"need")," our software to send data.\n",(0,r.kt)("a",{parentName:"p",href:"/docs/latest/quickstart/streaming/sending-curl"},"Here")," you can play with the actual\nhttp interaction."))),(0,r.kt)("h2",{id:"getting-data-out-of-strm-privacy"},"Getting data out of STRM Privacy"),(0,r.kt)("p",null,"STRM Privacy internally keeps its data in ",(0,r.kt)("a",{parentName:"p",href:"https://kafka.apache.org/"},"Apache\nKafka")," topics, that typically auto-expire\ntheir data in 7 days."),(0,r.kt)("p",null,"For getting the data into your systems we currently have the following\noptions."),(0,r.kt)("h3",{id:"batch-exports"},"Batch exports"),(0,r.kt)("p",null,"Currently, we have the option to do periodic (minute scale) exports to\nfor example AWS S3 and Google Cloud buckets, in Json-lines format ",(0,r.kt)("sup",{parentName:"p",id:"fnref-6"},(0,r.kt)("a",{parentName:"sup",href:"#fn-6",className:"footnote-ref"},"6")),". This is a\nvery common format for Data Scientists."),(0,r.kt)("h3",{id:"kafka-consumers"},"Kafka consumers"),(0,r.kt)("p",null,"We provide the option to create an internet accessible ",(0,r.kt)("sup",{parentName:"p",id:"fnref-7"},(0,r.kt)("a",{parentName:"sup",href:"#fn-7",className:"footnote-ref"},"7"))," Kafka cluster\nwhere you can use standard Kafka consumers to retrieve your data ",(0,r.kt)("sup",{parentName:"p",id:"fnref-8"},(0,r.kt)("a",{parentName:"sup",href:"#fn-8",className:"footnote-ref"},"8")),"."),(0,r.kt)("div",{className:"footnotes"},(0,r.kt)("hr",{parentName:"div"}),(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol",id:"fn-1"},"possibly plus internet roundtrip time",(0,r.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-2"},"named ",(0,r.kt)("inlineCode",{parentName:"li"},"key_field"),(0,r.kt)("a",{parentName:"li",href:"#fnref-2",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-3"},"at least from a GDPR perspective",(0,r.kt)("a",{parentName:"li",href:"#fnref-3",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-4"},"small integers",(0,r.kt)("a",{parentName:"li",href:"#fnref-4",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-5"},"currently Java, Javascript and Python",(0,r.kt)("a",{parentName:"li",href:"#fnref-5",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-6"},"even when the primary format is Avro",(0,r.kt)("a",{parentName:"li",href:"#fnref-6",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-7"},"authorized ofcourse",(0,r.kt)("a",{parentName:"li",href:"#fnref-7",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-8"},"in Json format for now",(0,r.kt)("a",{parentName:"li",href:"#fnref-8",className:"footnote-backref"},"\u21a9")))))}d.isMDXComponent=!0},141:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/flowchart-0568937d3272b18c446d32d5d0abc532.png"}}]);