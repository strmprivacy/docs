"use strict";(self.webpackChunkend_user_docs=self.webpackChunkend_user_docs||[]).push([[6870],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),u=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(i.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(a),m=r,h=p["".concat(i,".").concat(m)]||p[m]||d[m]||l;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var u=2;u<l;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(6010);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(7462),r=a(7294),l=a(6010),o=a(2466),s=a(6775),i=a(1980),u=a(7392),c=a(12);function p(e){return function(e){var t;return(null==(t=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function d(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??p(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,s.k6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,i._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(n.location.search);t.set(l,e),n.replace({...n.location,search:t.toString()})}),[l,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,l=d(e),[o,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:l}))),[i,u]=h({queryString:a,groupId:n}),[p,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,l]=(0,c.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:n}),y=(()=>{const e=i??p;return m({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{y&&s(y)}),[y]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),f(e)}),[u,f,l]),tabValues:l}}var y=a(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:a,selectedValue:s,selectValue:i,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,o.o5)(),d=e=>{const t=e.currentTarget,a=c.indexOf(t),n=u[a].value;n!==s&&(p(t),i(n))},m=e=>{var t;let a=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;a=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;a=c[t]??c[c.length-1];break}}null==(t=a)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:o}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:d},o,{className:(0,l.Z)("tabs__item",b.tabItem,null==o?void 0:o.className,{"tabs__item--active":s===t})}),a??t)})))}function k(e){let{lazy:t,children:a,selectedValue:n}=e;const l=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function g(e){const t=f(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",b.tabList)},r.createElement(v,(0,n.Z)({},e,t)),r.createElement(k,(0,n.Z)({},e,t)))}function w(e){const t=(0,y.Z)();return r.createElement(g,(0,n.Z)({key:String(t)},e))}},2025:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>p});var n=a(7462),r=(a(7294),a(3905)),l=a(4866),o=a(5162);const s={title:"Self-Hosted Installation",hide_table_of_contents:!1,description:"For any Kubernetes cluster (non-marketplace versions)."},i=void 0,u={unversionedId:"quickstart/ccd/self-hosted/index",id:"quickstart/ccd/self-hosted/index",title:"Self-Hosted Installation",description:"For any Kubernetes cluster (non-marketplace versions).",source:"@site/docs/03-quickstart/05-ccd/02-self-hosted/index.md",sourceDirName:"03-quickstart/05-ccd/02-self-hosted",slug:"/quickstart/ccd/self-hosted/",permalink:"/docs/latest/quickstart/ccd/self-hosted/",draft:!1,tags:[],version:"current",frontMatter:{title:"Self-Hosted Installation",hide_table_of_contents:!1,description:"For any Kubernetes cluster (non-marketplace versions)."},sidebar:"docs",previous:{title:"Prerequisites",permalink:"/docs/latest/quickstart/ccd/pre-requisites"},next:{title:"Advanced Configuration",permalink:"/docs/latest/quickstart/ccd/self-hosted/advanced"}},c={},p=[{value:"Step 1: Preparation",id:"step-1-preparation",level:2},{value:"Step 2: Install the Helm chart",id:"step-2-install-the-helm-chart",level:2},{value:"Wrap-up",id:"wrap-up",level:2}],d={toc:p},m="wrapper";function h(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This hands-on session shows how to get up-and-running with your Customer Cloud Deployment, and verify its\nfunctionality."),(0,r.kt)("h2",{id:"step-1-preparation"},"Step 1: Preparation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Make sure you have active kubernetes credentials to a cluster: ",(0,r.kt)("inlineCode",{parentName:"li"},"kubectl get nodes")," should show the nodes of your\ncluster."),(0,r.kt)("li",{parentName:"ol"},"Create a namespace ",(0,r.kt)("inlineCode",{parentName:"li"},"strmprivacy")," (",(0,r.kt)("inlineCode",{parentName:"li"},"kubectl create namespace strmprivacy"),") and set that as\ndefault (",(0,r.kt)("inlineCode",{parentName:"li"},"kubens strmprivacy"),")."),(0,r.kt)("li",{parentName:"ol"},"Download the credentials file ",(0,r.kt)("inlineCode",{parentName:"li"},"values.yaml")," through ",(0,r.kt)("a",{parentName:"li",href:"https://console.strmprivacy.io/settings/installation"},"the STRM Privacy Console")," (under Installation configuration).")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," file should be similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"showLineNumbers",showLineNumbers:!0},'  registry:\n    imagePullSecret: "ewogIC...."\n\n  license:\n    installationId: "f4cea...."\n    installationClientId: "ins-...."\n    installationClientSecret: "tii...."\n')),(0,r.kt)("admonition",{type:"important"},(0,r.kt)("p",{parentName:"admonition"},"Keep your ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," somewhere safe, especially if you have made configurations that differ from the default pre-populated\nversion from the ",(0,r.kt)("a",{parentName:"p",href:"https://console.strmprivacy.io/settings/installation"},"console"),".")),(0,r.kt)("h2",{id:"step-2-install-the-helm-chart"},"Step 2: Install the Helm chart"),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"gcs-chart",label:"From the STRM Helm Chart Repository (requires Google credentials)",mdxType:"TabItem"},(0,r.kt)("p",null,"Start by adding the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/hayorov/helm-gcs"},"GCS plugin")," for Helm, as the Helm Chart Repository for STRM Privacy resides in Google Cloud Storage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm plugin install https://github.com/hayorov/helm-gcs.git\n")),(0,r.kt)("p",null,"First, add the helm repo:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add strmrepo gs://stream-machine-production-helm-chart/data-plane\n")),(0,r.kt)("p",null,"Install ",(0,r.kt)("em",{parentName:"p"},"all")," the STRM components inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"strmprivacy")," namespace (or a different one of your choice)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm install strmprivacy strmrepo/strm --values values.yaml --namespace strmprivacy\n"))),(0,r.kt)(o.Z,{value:"github-chart",label:"Directly from GitHub",mdxType:"TabItem"},(0,r.kt)("p",null,"Alternatively, clone the Helm Chart's ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strmprivacy/data-plane-helm-chart/"},"GitHub repo")," and checkout the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strmprivacy/data-plane-helm-chart/releases"},"latest release"),", e.g.\n",(0,r.kt)("inlineCode",{parentName:"p"},"git checkout tags/<tag> -b latest"),"."),(0,r.kt)("p",null,"From the repo's root, and assuming your ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," file is in the root as well, execute the following\nto install ",(0,r.kt)("em",{parentName:"p"},"all")," the STRM components inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"strmprivacy")," namespace (or a different one of your choice)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm install strmprivacy helm --values values.yaml --namespace strmprivacy\n")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"kubectl get pods --watch")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"k9s")," provides nice feedback to see how the\ninstallation is progressing. We see that some supporting infrastructure like Redis, Postgresql and Kafka are also\ninstalled. The creation of these components can be disabled, in which case configuration to the actual components will\nhave to be added to the Helm chart."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"During creation, you'll see Error states on the event-gateway pods for instance. This is ",(0,r.kt)("em",{parentName:"p"},"nominal")," because it will fail\nto connect to Redis, which is still being deployed. Once Redis is healthy, you'll see the event-gateway status turn\nhealthy. Similarly, Kafka may take a while to reach the Ready state.")),(0,r.kt)("h2",{id:"wrap-up"},"Wrap-up"),(0,r.kt)("p",null,"You've installed a STRM Privacy Data Plane in a Kubernetes cluster. If you have had any issues during your\ninstallation, please let us know, or create a pull request\non ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strmprivacy/docs"},"GitHub")," to improve these docs."),(0,r.kt)("p",null,"Now that you are done with the setup, follow the docs on ",(0,r.kt)("a",{parentName:"p",href:"/docs/latest/quickstart/ccd/interacting"},"how to interact with your cluster")," to start\nusing it."))}h.isMDXComponent=!0}}]);