"use strict";(self.webpackChunkend_user_docs=self.webpackChunkend_user_docs||[]).push([[6870],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2025:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={title:"Self-Hosted Installation",hide_table_of_contents:!1,description:"For any Kubernetes cluster (non-marketplace versions)."},i=void 0,l={unversionedId:"quickstart/ccd/self-hosted/index",id:"quickstart/ccd/self-hosted/index",title:"Self-Hosted Installation",description:"For any Kubernetes cluster (non-marketplace versions).",source:"@site/docs/03-quickstart/05-ccd/02-self-hosted/index.md",sourceDirName:"03-quickstart/05-ccd/02-self-hosted",slug:"/quickstart/ccd/self-hosted/",permalink:"/docs/latest/quickstart/ccd/self-hosted/",draft:!1,tags:[],version:"current",frontMatter:{title:"Self-Hosted Installation",hide_table_of_contents:!1,description:"For any Kubernetes cluster (non-marketplace versions)."},sidebar:"docs",previous:{title:"Pre-requisites",permalink:"/docs/latest/quickstart/ccd/pre-requisites"},next:{title:"Advanced Configuration",permalink:"/docs/latest/quickstart/ccd/self-hosted/advanced"}},s={},c=[{value:"Step 1: Preparation",id:"step-1-preparation",level:2},{value:"Step 2: Install the Helm chart",id:"step-2-install-the-helm-chart",level:2},{value:"Wrap-up",id:"wrap-up",level:2}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This hands-on session shows how to get up-and-running with your Customer Cloud Deployment, and verify its\nfunctionality."),(0,r.kt)("h2",{id:"step-1-preparation"},"Step 1: Preparation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Make sure you have active kubernetes credentials to a cluster: ",(0,r.kt)("inlineCode",{parentName:"li"},"kubectl get nodes")," should show the nodes of your\ncluster."),(0,r.kt)("li",{parentName:"ol"},"Create a namespace ",(0,r.kt)("inlineCode",{parentName:"li"},"strmprivacy")," (",(0,r.kt)("inlineCode",{parentName:"li"},"kubectl create namespace strmprivacy"),") and set that as\ndefault (",(0,r.kt)("inlineCode",{parentName:"li"},"kubens strmprivacy"),")."),(0,r.kt)("li",{parentName:"ol"},"Download the credentials file ",(0,r.kt)("inlineCode",{parentName:"li"},"values.yaml")," through ",(0,r.kt)("a",{parentName:"li",href:"https://console.strmprivacy.io/installation/configuration"},"the STRM Privacy Console"),".")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," file should be similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"showLineNumbers",showLineNumbers:!0},'  registry:\n    imagePullSecret: "ewogIC...."\n\n  license:\n    installationId: "f4cea...."\n    installationClientId: "ins-...."\n    installationClientSecret: "tii...."\n\n  kafka:\n    enabled: true\n\n  redis:\n    enabled: true\n\n  postgresql:\n    enabled: true\n')),(0,r.kt)("admonition",{type:"important"},(0,r.kt)("p",{parentName:"admonition"},"Keep your ",(0,r.kt)("inlineCode",{parentName:"p"},"values.yaml")," somewhere safe, especially if you have made configurations that differ from the default pre-populated\nversion from the ",(0,r.kt)("a",{parentName:"p",href:"https://console.strmprivacy.io/installation/configuration"},"console"),".")),(0,r.kt)("h2",{id:"step-2-install-the-helm-chart"},"Step 2: Install the Helm chart"),(0,r.kt)("p",null,"Start by adding the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/hayorov/helm-gcs"},"GCS plugin")," for Helm, as the Helm Chart Repository for STRM Privacy resides in Google Cloud Storage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm plugin install https://github.com/hayorov/helm-gcs.git\n")),(0,r.kt)("p",null,"First, add the helm repo:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add strmrepo gs://stream-machine-production-helm-chart/data-plane\n")),(0,r.kt)("p",null,"Install ",(0,r.kt)("em",{parentName:"p"},"all")," the STRM components inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"strmprivacy")," namespace."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"helm install strmprivacy strmrepo/strm --values values.yaml\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"kubectl get pods --watch")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"k9s")," provides nice feedback to see how the\ninstallation is progressing. We see that some supporting infrastructure like Redis, Postgresql and Kafka are also\ninstalled. The creation of these components can be disabled, in which case configuration to the actual components will\nhave to be added to the Helm chart."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"During creation, you'll see Error states on the event-gateway pods for instance. This is ",(0,r.kt)("em",{parentName:"p"},"nominal")," because it will fail\nto connect to Redis, which is still being deployed. Once Redis is healthy, you'll see the event-gateway status turn\nhealthy")),(0,r.kt)("admonition",{title:"Create in a different namespace",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Add ",(0,r.kt)("inlineCode",{parentName:"p"},"--namespace <your-namespace>")," to the ",(0,r.kt)("inlineCode",{parentName:"p"},"helm install")," command.")),(0,r.kt)("h2",{id:"wrap-up"},"Wrap-up"),(0,r.kt)("p",null,"You've installed a STRM Privacy Data Plane in a Kubernetes cluster. If you have had any issues during your\ninstallation, please let us know, or create a pull request\non ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strmprivacy/data-plane-helm-chart"},"GitHub")," to improve these docs."),(0,r.kt)("p",null,"Now that you are done with the setup, follow the docs on ",(0,r.kt)("a",{parentName:"p",href:"/docs/latest/quickstart/ccd/interacting"},"how to interact with your cluster")," to start\nusing it."))}u.isMDXComponent=!0}}]);